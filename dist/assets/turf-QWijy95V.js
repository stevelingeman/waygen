import{c as Lt,g as kt,a as Nt}from"./mapbox-yEoyp_b1.js";function qe(r,t,e){if(r!==null)for(var n,a,i,f,l,o,c,m=0,h=0,b,w=r.type,S=w==="FeatureCollection",A=w==="Feature",C=S?r.features.length:1,O=0;O<C;O++){c=S?r.features[O].geometry:A?r.geometry:r,b=c?c.type==="GeometryCollection":!1,l=b?c.geometries.length:1;for(var s=0;s<l;s++){var u=0,y=0;if(f=b?c.geometries[s]:c,f!==null){o=f.coordinates;var v=f.type;switch(m=0,v){case null:break;case"Point":if(t(o,h,O,u,y)===!1)return!1;h++,u++;break;case"LineString":case"MultiPoint":for(n=0;n<o.length;n++){if(t(o[n],h,O,u,y)===!1)return!1;h++,v==="MultiPoint"&&u++}v==="LineString"&&u++;break;case"Polygon":case"MultiLineString":for(n=0;n<o.length;n++){for(a=0;a<o[n].length-m;a++){if(t(o[n][a],h,O,u,y)===!1)return!1;h++}v==="MultiLineString"&&u++,v==="Polygon"&&y++}v==="Polygon"&&u++;break;case"MultiPolygon":for(n=0;n<o.length;n++){for(y=0,a=0;a<o[n].length;a++){for(i=0;i<o[n][a].length-m;i++){if(t(o[n][a][i],h,O,u,y)===!1)return!1;h++}y++}u++}break;case"GeometryCollection":for(n=0;n<f.geometries.length;n++)if(qe(f.geometries[n],t)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function mr(r){var t=[1/0,1/0,-1/0,-1/0];return qe(r,function(e){t[0]>e[0]&&(t[0]=e[0]),t[1]>e[1]&&(t[1]=e[1]),t[2]<e[0]&&(t[2]=e[0]),t[3]<e[1]&&(t[3]=e[1])}),t}mr.default=mr;const Gt=Object.freeze(Object.defineProperty({__proto__:null,default:mr},Symbol.toStringTag,{value:"Module"}));function G(r){if(!r)throw new Error("coord is required");if(!Array.isArray(r)){if(r.type==="Feature"&&r.geometry!==null&&r.geometry.type==="Point")return r.geometry.coordinates;if(r.type==="Point")return r.coordinates}if(Array.isArray(r)&&r.length>=2&&!Array.isArray(r[0])&&!Array.isArray(r[1]))return r;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function z(r){if(Array.isArray(r))return r;if(r.type==="Feature"){if(r.geometry!==null)return r.geometry.coordinates}else if(r.coordinates)return r.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}function Xe(r){return r.type==="Feature"?r.geometry:r}function jr(r,t){return r.type==="FeatureCollection"?"FeatureCollection":r.type==="GeometryCollection"?"GeometryCollection":r.type==="Feature"&&r.geometry!==null?r.geometry.type:r.type}function Xi(r,t,e){if(e===void 0&&(e={}),!r)throw new Error("point is required");if(!t)throw new Error("polygon is required");var n=G(r),a=Xe(t),i=a.type,f=t.bbox,l=a.coordinates;if(f&&_t(n,f)===!1)return!1;i==="Polygon"&&(l=[l]);for(var o=!1,c=0;c<l.length&&!o;c++)if(re(n,l[c][0],e.ignoreBoundary)){for(var m=!1,h=1;h<l[c].length&&!m;)re(n,l[c][h],!e.ignoreBoundary)&&(m=!0),h++;m||(o=!0)}return o}function re(r,t,e){var n=!1;t[0][0]===t[t.length-1][0]&&t[0][1]===t[t.length-1][1]&&(t=t.slice(0,t.length-1));for(var a=0,i=t.length-1;a<t.length;i=a++){var f=t[a][0],l=t[a][1],o=t[i][0],c=t[i][1],m=r[1]*(f-o)+l*(o-r[0])+c*(r[0]-f)===0&&(f-r[0])*(o-r[0])<=0&&(l-r[1])*(c-r[1])<=0;if(m)return!e;var h=l>r[1]!=c>r[1]&&r[0]<(o-f)*(r[1]-l)/(c-l)+f;h&&(n=!n)}return n}function _t(r,t){return t[0]<=r[0]&&t[1]<=r[1]&&t[2]>=r[0]&&t[3]>=r[1]}var x=63710088e-1,Dt={centimeters:x*100,centimetres:x*100,degrees:x/111325,feet:x*3.28084,inches:x*39.37,kilometers:x/1e3,kilometres:x/1e3,meters:x,metres:x,miles:x/1609.344,millimeters:x*1e3,millimetres:x*1e3,nauticalmiles:x/1852,radians:1,yards:x*1.0936};function Tt(r,t){t===void 0&&(t="kilometers");var e=Dt[t];if(!e)throw new Error(t+" units is invalid");return r*e}function hr(r){var t=r%360;return t*Math.PI/180}function J(r,t,e){e===void 0&&(e={});var n=G(r),a=G(t),i=hr(a[1]-n[1]),f=hr(a[0]-n[0]),l=hr(n[1]),o=hr(a[1]),c=Math.pow(Math.sin(i/2),2)+Math.pow(Math.sin(f/2),2)*Math.cos(l)*Math.cos(o);return Tt(2*Math.atan2(Math.sqrt(c),Math.sqrt(1-c)),e.units)}const Ui=Object.freeze(Object.defineProperty({__proto__:null,default:J},Symbol.toStringTag,{value:"Module"}));function xt(r){var t=r[0],e=r[1],n=r[2],a=r[3],i=J(r.slice(0,2),[n,e]),f=J(r.slice(0,2),[t,a]);if(i>=f){var l=(e+a)/2;return[t,l-(n-t)/2,n,l+(n-t)/2]}else{var o=(t+n)/2;return[o-(a-e)/2,e,o+(a-e)/2,a]}}var Y=63710088e-1,Yt={centimeters:Y*100,centimetres:Y*100,degrees:Y/111325,feet:Y*3.28084,inches:Y*39.37,kilometers:Y/1e3,kilometres:Y/1e3,meters:Y,metres:Y,miles:Y/1609.344,millimeters:Y*1e3,millimetres:Y*1e3,nauticalmiles:Y/1852,radians:1,yards:Y*1.0936};function qt(r,t,e){e===void 0&&(e={});var n={type:"Feature"};return(e.id===0||e.id)&&(n.id=e.id),e.bbox&&(n.bbox=e.bbox),n.properties=t||{},n.geometry=r,n}function Xt(r,t,e){if(e===void 0&&(e={}),!r)throw new Error("coordinates is required");if(!Array.isArray(r))throw new Error("coordinates must be an Array");if(r.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!te(r[0])||!te(r[1]))throw new Error("coordinates must contain numbers");var n={type:"Point",coordinates:r};return qt(n,t,e)}function Ut(r,t){t===void 0&&(t="kilometers");var e=Yt[t];if(!e)throw new Error(t+" units is invalid");return r/e}function ee(r){var t=r%(2*Math.PI);return t*180/Math.PI}function $r(r){var t=r%360;return t*Math.PI/180}function te(r){return!isNaN(r)&&r!==null&&!Array.isArray(r)}function ar(r,t,e,n){n===void 0&&(n={});var a=G(r),i=$r(a[0]),f=$r(a[1]),l=$r(e),o=Ut(t,n.units),c=Math.asin(Math.sin(f)*Math.cos(o)+Math.cos(f)*Math.sin(o)*Math.cos(l)),m=i+Math.atan2(Math.sin(l)*Math.sin(o)*Math.cos(f),Math.cos(o)-Math.sin(f)*Math.sin(c)),h=ee(m),b=ee(c);return Xt([h,b],n.properties)}function Wt(r,t,e){e===void 0&&(e={});var n={type:"Feature"};return(e.id===0||e.id)&&(n.id=e.id),e.bbox&&(n.bbox=e.bbox),n.properties=t||{},n.geometry=r,n}function Jt(r,t,e){e===void 0&&(e={});for(var n=0,a=r;n<a.length;n++){var i=a[n];if(i.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var f=0;f<i[i.length-1].length;f++)if(i[i.length-1][f]!==i[0][f])throw new Error("First and last Position are not equivalent.")}var l={type:"Polygon",coordinates:r};return Wt(l,t,e)}function zt(r,t,e){e===void 0&&(e={});for(var n=e.steps||64,a=e.properties?e.properties:!Array.isArray(r)&&r.type==="Feature"&&r.properties?r.properties:{},i=[],f=0;f<n;f++)i.push(ar(r,t,f*-360/n,e).geometry.coordinates);return i.push(i[0]),Jt([i],a)}const Wi=Object.freeze(Object.defineProperty({__proto__:null,default:zt},Symbol.toStringTag,{value:"Module"}));function Ht(r){var t=r%(2*Math.PI);return t*180/Math.PI}function vr(r){var t=r%360;return t*Math.PI/180}function Mr(r,t,e){if(e===void 0&&(e={}),e.final===!0)return Vt(r,t);var n=G(r),a=G(t),i=vr(n[0]),f=vr(a[0]),l=vr(n[1]),o=vr(a[1]),c=Math.sin(f-i)*Math.cos(o),m=Math.cos(l)*Math.sin(o)-Math.sin(l)*Math.cos(o)*Math.cos(f-i);return Ht(Math.atan2(c,m))}function Vt(r,t){var e=Mr(t,r);return e=(e+180)%360,e}function Ji(r,t){var e=J(r,t),n=Mr(r,t),a=ar(r,e/2,n);return a}function Kt(r,t,e){e===void 0&&(e={});var n={type:"Feature"};return(e.id===0||e.id)&&(n.id=e.id),e.bbox&&(n.bbox=e.bbox),n.properties=t||{},n.geometry=r,n}function It(r,t,e){if(e===void 0&&(e={}),!r)throw new Error("coordinates is required");if(!Array.isArray(r))throw new Error("coordinates must be an Array");if(r.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!ne(r[0])||!ne(r[1]))throw new Error("coordinates must contain numbers");var n={type:"Point",coordinates:r};return Kt(n,t,e)}function ne(r){return!isNaN(r)&&r!==null&&!Array.isArray(r)}function Ue(r,t,e){if(r!==null)for(var n,a,i,f,l,o,c,m=0,h=0,b,w=r.type,S=w==="FeatureCollection",A=w==="Feature",C=S?r.features.length:1,O=0;O<C;O++){c=S?r.features[O].geometry:A?r.geometry:r,b=c?c.type==="GeometryCollection":!1,l=b?c.geometries.length:1;for(var s=0;s<l;s++){var u=0,y=0;if(f=b?c.geometries[s]:c,f!==null){o=f.coordinates;var v=f.type;switch(m=v==="Polygon"||v==="MultiPolygon"?1:0,v){case null:break;case"Point":if(t(o,h,O,u,y)===!1)return!1;h++,u++;break;case"LineString":case"MultiPoint":for(n=0;n<o.length;n++){if(t(o[n],h,O,u,y)===!1)return!1;h++,v==="MultiPoint"&&u++}v==="LineString"&&u++;break;case"Polygon":case"MultiLineString":for(n=0;n<o.length;n++){for(a=0;a<o[n].length-m;a++){if(t(o[n][a],h,O,u,y)===!1)return!1;h++}v==="MultiLineString"&&u++,v==="Polygon"&&y++}v==="Polygon"&&u++;break;case"MultiPolygon":for(n=0;n<o.length;n++){for(y=0,a=0;a<o[n].length;a++){for(i=0;i<o[n][a].length-m;i++){if(t(o[n][a][i],h,O,u,y)===!1)return!1;h++}y++}u++}break;case"GeometryCollection":for(n=0;n<f.geometries.length;n++)if(Ue(f.geometries[n],t)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function Qt(r,t){t===void 0&&(t={});var e=0,n=0,a=0;return Ue(r,function(i){e+=i[0],n+=i[1],a++}),It([e/a,n/a],t.properties)}function _r(r,t,e){e===void 0&&(e={});var n={type:"Feature"};return(e.id===0||e.id)&&(n.id=e.id),e.bbox&&(n.bbox=e.bbox),n.properties={},n.geometry=r,n}function Zt(r,t,e){if(e===void 0&&(e={}),!r)throw new Error("coordinates is required");if(!Array.isArray(r))throw new Error("coordinates must be an Array");if(r.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!ie(r[0])||!ie(r[1]))throw new Error("coordinates must contain numbers");var n={type:"Point",coordinates:r};return _r(n,t,e)}function ae(r,t){t===void 0&&(t={});var e={type:"FeatureCollection"};return t.id&&(e.id=t.id),t.bbox&&(e.bbox=t.bbox),e.features=r,e}function ie(r){return!isNaN(r)&&r!==null&&!Array.isArray(r)}function Dr(r,t,e){e===void 0&&(e={});var n={type:"Feature"};return(e.id===0||e.id)&&(n.id=e.id),e.bbox&&(n.bbox=e.bbox),n.properties=t||{},n.geometry=r,n}function jt(r,t,e){if(e===void 0&&(e={}),r.length<2)throw new Error("coordinates must be an array of two or more positions");var n={type:"LineString",coordinates:r};return Dr(n,t,e)}function rn(r,t){t===void 0&&(t={});var e={type:"FeatureCollection"};return t.id&&(e.id=t.id),t.bbox&&(e.bbox=t.bbox),e.features=r,e}function en(r,t){var e,n,a,i,f,l,o,c,m,h,b=0,w=r.type==="FeatureCollection",S=r.type==="Feature",A=w?r.features.length:1;for(e=0;e<A;e++){for(l=w?r.features[e].geometry:S?r.geometry:r,c=w?r.features[e].properties:S?r.properties:{},m=w?r.features[e].bbox:S?r.bbox:void 0,h=w?r.features[e].id:S?r.id:void 0,o=l?l.type==="GeometryCollection":!1,f=o?l.geometries.length:1,a=0;a<f;a++){if(i=o?l.geometries[a]:l,i===null){if(t(null,b,c,m,h)===!1)return!1;continue}switch(i.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(t(i,b,c,m,h)===!1)return!1;break}case"GeometryCollection":{for(n=0;n<i.geometries.length;n++)if(t(i.geometries[n],b,c,m,h)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}b++}}function tn(r,t){en(r,function(e,n,a,i,f){var l=e===null?null:e.type;switch(l){case null:case"Point":case"LineString":case"Polygon":return t(Dr(e,a,{bbox:i,id:f}),n,0)===!1?!1:void 0}var o;switch(l){case"MultiPoint":o="Point";break;case"MultiLineString":o="LineString";break;case"MultiPolygon":o="Polygon";break}for(var c=0;c<e.coordinates.length;c++){var m=e.coordinates[c],h={type:o,coordinates:m};if(t(Dr(h,a),n,c)===!1)return!1}})}function Tr(r){if(!r)throw new Error("geojson is required");var t=[];return tn(r,function(e){nn(e,t)}),rn(t)}function nn(r,t){var e=[],n=r.geometry;if(n!==null){switch(n.type){case"Polygon":e=z(n);break;case"LineString":e=[z(n)]}e.forEach(function(a){var i=an(a,r.properties);i.forEach(function(f){f.id=t.length,t.push(f)})})}}function an(r,t){var e=[];return r.reduce(function(n,a){var i=jt([n,a],t);return i.bbox=on(n,a),e.push(i),a}),e}function on(r,t){var e=r[0],n=r[1],a=t[0],i=t[1],f=e<a?e:a,l=n<i?n:i,o=e>a?e:a,c=n>i?n:i;return[f,l,o,c]}function oe(r,t){if(r.type==="Feature")t(r,0);else if(r.type==="FeatureCollection")for(var e=0;e<r.features.length&&t(r.features[e],e)!==!1;e++);}var Ur={exports:{}},We={exports:{}};(function(r,t){(function(e,n){r.exports=n()})(Lt,function(){function e(s,u,y,v,M){(function P(E,R,B,p,d){for(;p>B;){if(p-B>600){var g=p-B+1,$=R-B+1,q=Math.log(g),T=.5*Math.exp(2*q/3),X=.5*Math.sqrt(q*T*(g-T)/g)*($-g/2<0?-1:1),H=Math.max(B,Math.floor(R-$*T/g+X)),Bt=Math.min(p,Math.floor(R+(g-$)*T/g+X));P(E,R,H,Bt,d)}var yr=E[R],er=B,U=p;for(n(E,B,R),d(E[p],yr)>0&&n(E,B,p);er<U;){for(n(E,er,U),er++,U--;d(E[er],yr)<0;)er++;for(;d(E[U],yr)>0;)U--}d(E[B],yr)===0?n(E,B,U):n(E,++U,p),U<=R&&(B=U+1),R<=U&&(p=U-1)}})(s,u,y||0,v||s.length-1,M||a)}function n(s,u,y){var v=s[u];s[u]=s[y],s[y]=v}function a(s,u){return s<u?-1:s>u?1:0}var i=function(s){s===void 0&&(s=9),this._maxEntries=Math.max(4,s),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function f(s,u,y){if(!y)return u.indexOf(s);for(var v=0;v<u.length;v++)if(y(s,u[v]))return v;return-1}function l(s,u){o(s,0,s.children.length,u,s)}function o(s,u,y,v,M){M||(M=C(null)),M.minX=1/0,M.minY=1/0,M.maxX=-1/0,M.maxY=-1/0;for(var P=u;P<y;P++){var E=s.children[P];c(M,s.leaf?v(E):E)}return M}function c(s,u){return s.minX=Math.min(s.minX,u.minX),s.minY=Math.min(s.minY,u.minY),s.maxX=Math.max(s.maxX,u.maxX),s.maxY=Math.max(s.maxY,u.maxY),s}function m(s,u){return s.minX-u.minX}function h(s,u){return s.minY-u.minY}function b(s){return(s.maxX-s.minX)*(s.maxY-s.minY)}function w(s){return s.maxX-s.minX+(s.maxY-s.minY)}function S(s,u){return s.minX<=u.minX&&s.minY<=u.minY&&u.maxX<=s.maxX&&u.maxY<=s.maxY}function A(s,u){return u.minX<=s.maxX&&u.minY<=s.maxY&&u.maxX>=s.minX&&u.maxY>=s.minY}function C(s){return{children:s,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function O(s,u,y,v,M){for(var P=[u,y];P.length;)if(!((y=P.pop())-(u=P.pop())<=v)){var E=u+Math.ceil((y-u)/v/2)*v;e(s,E,u,y,M),P.push(u,E,E,y)}}return i.prototype.all=function(){return this._all(this.data,[])},i.prototype.search=function(s){var u=this.data,y=[];if(!A(s,u))return y;for(var v=this.toBBox,M=[];u;){for(var P=0;P<u.children.length;P++){var E=u.children[P],R=u.leaf?v(E):E;A(s,R)&&(u.leaf?y.push(E):S(s,R)?this._all(E,y):M.push(E))}u=M.pop()}return y},i.prototype.collides=function(s){var u=this.data;if(!A(s,u))return!1;for(var y=[];u;){for(var v=0;v<u.children.length;v++){var M=u.children[v],P=u.leaf?this.toBBox(M):M;if(A(s,P)){if(u.leaf||S(s,P))return!0;y.push(M)}}u=y.pop()}return!1},i.prototype.load=function(s){if(!s||!s.length)return this;if(s.length<this._minEntries){for(var u=0;u<s.length;u++)this.insert(s[u]);return this}var y=this._build(s.slice(),0,s.length-1,0);if(this.data.children.length)if(this.data.height===y.height)this._splitRoot(this.data,y);else{if(this.data.height<y.height){var v=this.data;this.data=y,y=v}this._insert(y,this.data.height-y.height-1,!0)}else this.data=y;return this},i.prototype.insert=function(s){return s&&this._insert(s,this.data.height-1),this},i.prototype.clear=function(){return this.data=C([]),this},i.prototype.remove=function(s,u){if(!s)return this;for(var y,v,M,P=this.data,E=this.toBBox(s),R=[],B=[];P||R.length;){if(P||(P=R.pop(),v=R[R.length-1],y=B.pop(),M=!0),P.leaf){var p=f(s,P.children,u);if(p!==-1)return P.children.splice(p,1),R.push(P),this._condense(R),this}M||P.leaf||!S(P,E)?v?(y++,P=v.children[y],M=!1):P=null:(R.push(P),B.push(y),y=0,v=P,P=P.children[0])}return this},i.prototype.toBBox=function(s){return s},i.prototype.compareMinX=function(s,u){return s.minX-u.minX},i.prototype.compareMinY=function(s,u){return s.minY-u.minY},i.prototype.toJSON=function(){return this.data},i.prototype.fromJSON=function(s){return this.data=s,this},i.prototype._all=function(s,u){for(var y=[];s;)s.leaf?u.push.apply(u,s.children):y.push.apply(y,s.children),s=y.pop();return u},i.prototype._build=function(s,u,y,v){var M,P=y-u+1,E=this._maxEntries;if(P<=E)return l(M=C(s.slice(u,y+1)),this.toBBox),M;v||(v=Math.ceil(Math.log(P)/Math.log(E)),E=Math.ceil(P/Math.pow(E,v-1))),(M=C([])).leaf=!1,M.height=v;var R=Math.ceil(P/E),B=R*Math.ceil(Math.sqrt(E));O(s,u,y,B,this.compareMinX);for(var p=u;p<=y;p+=B){var d=Math.min(p+B-1,y);O(s,p,d,R,this.compareMinY);for(var g=p;g<=d;g+=R){var $=Math.min(g+R-1,d);M.children.push(this._build(s,g,$,v-1))}}return l(M,this.toBBox),M},i.prototype._chooseSubtree=function(s,u,y,v){for(;v.push(u),!u.leaf&&v.length-1!==y;){for(var M=1/0,P=1/0,E=void 0,R=0;R<u.children.length;R++){var B=u.children[R],p=b(B),d=(g=s,$=B,(Math.max($.maxX,g.maxX)-Math.min($.minX,g.minX))*(Math.max($.maxY,g.maxY)-Math.min($.minY,g.minY))-p);d<P?(P=d,M=p<M?p:M,E=B):d===P&&p<M&&(M=p,E=B)}u=E||u.children[0]}var g,$;return u},i.prototype._insert=function(s,u,y){var v=y?s:this.toBBox(s),M=[],P=this._chooseSubtree(v,this.data,u,M);for(P.children.push(s),c(P,v);u>=0&&M[u].children.length>this._maxEntries;)this._split(M,u),u--;this._adjustParentBBoxes(v,M,u)},i.prototype._split=function(s,u){var y=s[u],v=y.children.length,M=this._minEntries;this._chooseSplitAxis(y,M,v);var P=this._chooseSplitIndex(y,M,v),E=C(y.children.splice(P,y.children.length-P));E.height=y.height,E.leaf=y.leaf,l(y,this.toBBox),l(E,this.toBBox),u?s[u-1].children.push(E):this._splitRoot(y,E)},i.prototype._splitRoot=function(s,u){this.data=C([s,u]),this.data.height=s.height+1,this.data.leaf=!1,l(this.data,this.toBBox)},i.prototype._chooseSplitIndex=function(s,u,y){for(var v,M,P,E,R,B,p,d=1/0,g=1/0,$=u;$<=y-u;$++){var q=o(s,0,$,this.toBBox),T=o(s,$,y,this.toBBox),X=(M=q,P=T,E=void 0,R=void 0,B=void 0,p=void 0,E=Math.max(M.minX,P.minX),R=Math.max(M.minY,P.minY),B=Math.min(M.maxX,P.maxX),p=Math.min(M.maxY,P.maxY),Math.max(0,B-E)*Math.max(0,p-R)),H=b(q)+b(T);X<d?(d=X,v=$,g=H<g?H:g):X===d&&H<g&&(g=H,v=$)}return v||y-u},i.prototype._chooseSplitAxis=function(s,u,y){var v=s.leaf?this.compareMinX:m,M=s.leaf?this.compareMinY:h;this._allDistMargin(s,u,y,v)<this._allDistMargin(s,u,y,M)&&s.children.sort(v)},i.prototype._allDistMargin=function(s,u,y,v){s.children.sort(v);for(var M=this.toBBox,P=o(s,0,u,M),E=o(s,y-u,y,M),R=w(P)+w(E),B=u;B<y-u;B++){var p=s.children[B];c(P,s.leaf?M(p):p),R+=w(P)}for(var d=y-u-1;d>=u;d--){var g=s.children[d];c(E,s.leaf?M(g):g),R+=w(E)}return R},i.prototype._adjustParentBBoxes=function(s,u,y){for(var v=y;v>=0;v--)c(u[v],s)},i.prototype._condense=function(s){for(var u=s.length-1,y=void 0;u>=0;u--)s[u].children.length===0?u>0?(y=s[u-1].children).splice(y.indexOf(s[u]),1):this.clear():l(s[u],this.toBBox)},i})})(We);var fn=We.exports,Wr={};(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.earthRadius=63710088e-1,r.factors={centimeters:r.earthRadius*100,centimetres:r.earthRadius*100,degrees:r.earthRadius/111325,feet:r.earthRadius*3.28084,inches:r.earthRadius*39.37,kilometers:r.earthRadius/1e3,kilometres:r.earthRadius/1e3,meters:r.earthRadius,metres:r.earthRadius,miles:r.earthRadius/1609.344,millimeters:r.earthRadius*1e3,millimetres:r.earthRadius*1e3,nauticalmiles:r.earthRadius/1852,radians:1,yards:r.earthRadius*1.0936},r.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:1/1e3,kilometres:1/1e3,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/r.earthRadius,yards:1.0936133},r.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046};function t(p,d,g){g===void 0&&(g={});var $={type:"Feature"};return(g.id===0||g.id)&&($.id=g.id),g.bbox&&($.bbox=g.bbox),$.properties=d||{},$.geometry=p,$}r.feature=t;function e(p,d,g){switch(p){case"Point":return n(d).geometry;case"LineString":return l(d).geometry;case"Polygon":return i(d).geometry;case"MultiPoint":return h(d).geometry;case"MultiLineString":return m(d).geometry;case"MultiPolygon":return b(d).geometry;default:throw new Error(p+" is invalid")}}r.geometry=e;function n(p,d,g){if(g===void 0&&(g={}),!p)throw new Error("coordinates is required");if(!Array.isArray(p))throw new Error("coordinates must be an Array");if(p.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!P(p[0])||!P(p[1]))throw new Error("coordinates must contain numbers");var $={type:"Point",coordinates:p};return t($,d,g)}r.point=n;function a(p,d,g){return g===void 0&&(g={}),c(p.map(function($){return n($,d)}),g)}r.points=a;function i(p,d,g){g===void 0&&(g={});for(var $=0,q=p;$<q.length;$++){var T=q[$];if(T.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var X=0;X<T[T.length-1].length;X++)if(T[T.length-1][X]!==T[0][X])throw new Error("First and last Position are not equivalent.")}var H={type:"Polygon",coordinates:p};return t(H,d,g)}r.polygon=i;function f(p,d,g){return g===void 0&&(g={}),c(p.map(function($){return i($,d)}),g)}r.polygons=f;function l(p,d,g){if(g===void 0&&(g={}),p.length<2)throw new Error("coordinates must be an array of two or more positions");var $={type:"LineString",coordinates:p};return t($,d,g)}r.lineString=l;function o(p,d,g){return g===void 0&&(g={}),c(p.map(function($){return l($,d)}),g)}r.lineStrings=o;function c(p,d){d===void 0&&(d={});var g={type:"FeatureCollection"};return d.id&&(g.id=d.id),d.bbox&&(g.bbox=d.bbox),g.features=p,g}r.featureCollection=c;function m(p,d,g){g===void 0&&(g={});var $={type:"MultiLineString",coordinates:p};return t($,d,g)}r.multiLineString=m;function h(p,d,g){g===void 0&&(g={});var $={type:"MultiPoint",coordinates:p};return t($,d,g)}r.multiPoint=h;function b(p,d,g){g===void 0&&(g={});var $={type:"MultiPolygon",coordinates:p};return t($,d,g)}r.multiPolygon=b;function w(p,d,g){g===void 0&&(g={});var $={type:"GeometryCollection",geometries:p};return t($,d,g)}r.geometryCollection=w;function S(p,d){if(d===void 0&&(d=0),d&&!(d>=0))throw new Error("precision must be a positive number");var g=Math.pow(10,d||0);return Math.round(p*g)/g}r.round=S;function A(p,d){d===void 0&&(d="kilometers");var g=r.factors[d];if(!g)throw new Error(d+" units is invalid");return p*g}r.radiansToLength=A;function C(p,d){d===void 0&&(d="kilometers");var g=r.factors[d];if(!g)throw new Error(d+" units is invalid");return p/g}r.lengthToRadians=C;function O(p,d){return u(C(p,d))}r.lengthToDegrees=O;function s(p){var d=p%360;return d<0&&(d+=360),d}r.bearingToAzimuth=s;function u(p){var d=p%(2*Math.PI);return d*180/Math.PI}r.radiansToDegrees=u;function y(p){var d=p%360;return d*Math.PI/180}r.degreesToRadians=y;function v(p,d,g){if(d===void 0&&(d="kilometers"),g===void 0&&(g="kilometers"),!(p>=0))throw new Error("length must be a positive number");return A(C(p,d),g)}r.convertLength=v;function M(p,d,g){if(d===void 0&&(d="meters"),g===void 0&&(g="kilometers"),!(p>=0))throw new Error("area must be a positive number");var $=r.areaFactors[d];if(!$)throw new Error("invalid original units");var q=r.areaFactors[g];if(!q)throw new Error("invalid final units");return p/$*q}r.convertArea=M;function P(p){return!isNaN(p)&&p!==null&&!Array.isArray(p)}r.isNumber=P;function E(p){return!!p&&p.constructor===Object}r.isObject=E;function R(p){if(!p)throw new Error("bbox is required");if(!Array.isArray(p))throw new Error("bbox must be an Array");if(p.length!==4&&p.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");p.forEach(function(d){if(!P(d))throw new Error("bbox must only contain numbers")})}r.validateBBox=R;function B(p){if(!p)throw new Error("id is required");if(["string","number"].indexOf(typeof p)===-1)throw new Error("id must be a number or a string")}r.validateId=B})(Wr);var L={};Object.defineProperty(L,"__esModule",{value:!0});var N=Wr;function fr(r,t,e){if(r!==null)for(var n,a,i,f,l,o,c,m=0,h=0,b,w=r.type,S=w==="FeatureCollection",A=w==="Feature",C=S?r.features.length:1,O=0;O<C;O++){c=S?r.features[O].geometry:A?r.geometry:r,b=c?c.type==="GeometryCollection":!1,l=b?c.geometries.length:1;for(var s=0;s<l;s++){var u=0,y=0;if(f=b?c.geometries[s]:c,f!==null){o=f.coordinates;var v=f.type;switch(m=e&&(v==="Polygon"||v==="MultiPolygon")?1:0,v){case null:break;case"Point":if(t(o,h,O,u,y)===!1)return!1;h++,u++;break;case"LineString":case"MultiPoint":for(n=0;n<o.length;n++){if(t(o[n],h,O,u,y)===!1)return!1;h++,v==="MultiPoint"&&u++}v==="LineString"&&u++;break;case"Polygon":case"MultiLineString":for(n=0;n<o.length;n++){for(a=0;a<o[n].length-m;a++){if(t(o[n][a],h,O,u,y)===!1)return!1;h++}v==="MultiLineString"&&u++,v==="Polygon"&&y++}v==="Polygon"&&u++;break;case"MultiPolygon":for(n=0;n<o.length;n++){for(y=0,a=0;a<o[n].length;a++){for(i=0;i<o[n][a].length-m;i++){if(t(o[n][a][i],h,O,u,y)===!1)return!1;h++}y++}u++}break;case"GeometryCollection":for(n=0;n<f.geometries.length;n++)if(fr(f.geometries[n],t,e)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function ln(r,t,e,n){var a=e;return fr(r,function(i,f,l,o,c){f===0&&e===void 0?a=i:a=t(a,i,f,l,o,c)},n),a}function Je(r,t){var e;switch(r.type){case"FeatureCollection":for(e=0;e<r.features.length&&t(r.features[e].properties,e)!==!1;e++);break;case"Feature":t(r.properties,0);break}}function un(r,t,e){var n=e;return Je(r,function(a,i){i===0&&e===void 0?n=a:n=t(n,a,i)}),n}function ze(r,t){if(r.type==="Feature")t(r,0);else if(r.type==="FeatureCollection")for(var e=0;e<r.features.length&&t(r.features[e],e)!==!1;e++);}function sn(r,t,e){var n=e;return ze(r,function(a,i){i===0&&e===void 0?n=a:n=t(n,a,i)}),n}function cn(r){var t=[];return fr(r,function(e){t.push(e)}),t}function Jr(r,t){var e,n,a,i,f,l,o,c,m,h,b=0,w=r.type==="FeatureCollection",S=r.type==="Feature",A=w?r.features.length:1;for(e=0;e<A;e++){for(l=w?r.features[e].geometry:S?r.geometry:r,c=w?r.features[e].properties:S?r.properties:{},m=w?r.features[e].bbox:S?r.bbox:void 0,h=w?r.features[e].id:S?r.id:void 0,o=l?l.type==="GeometryCollection":!1,f=o?l.geometries.length:1,a=0;a<f;a++){if(i=o?l.geometries[a]:l,i===null){if(t(null,b,c,m,h)===!1)return!1;continue}switch(i.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(t(i,b,c,m,h)===!1)return!1;break}case"GeometryCollection":{for(n=0;n<i.geometries.length;n++)if(t(i.geometries[n],b,c,m,h)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}b++}}function yn(r,t,e){var n=e;return Jr(r,function(a,i,f,l,o){i===0&&e===void 0?n=a:n=t(n,a,i,f,l,o)}),n}function Sr(r,t){Jr(r,function(e,n,a,i,f){var l=e===null?null:e.type;switch(l){case null:case"Point":case"LineString":case"Polygon":return t(N.feature(e,a,{bbox:i,id:f}),n,0)===!1?!1:void 0}var o;switch(l){case"MultiPoint":o="Point";break;case"MultiLineString":o="LineString";break;case"MultiPolygon":o="Polygon";break}for(var c=0;c<e.coordinates.length;c++){var m=e.coordinates[c],h={type:o,coordinates:m};if(t(N.feature(h,a),n,c)===!1)return!1}})}function hn(r,t,e){var n=e;return Sr(r,function(a,i,f){i===0&&f===0&&e===void 0?n=a:n=t(n,a,i,f)}),n}function He(r,t){Sr(r,function(e,n,a){var i=0;if(e.geometry){var f=e.geometry.type;if(!(f==="Point"||f==="MultiPoint")){var l,o=0,c=0,m=0;if(fr(e,function(h,b,w,S,A){if(l===void 0||n>o||S>c||A>m){l=h,o=n,c=S,m=A,i=0;return}var C=N.lineString([l,h],e.properties);if(t(C,n,a,A,i)===!1)return!1;i++,l=h})===!1)return!1}}})}function vn(r,t,e){var n=e,a=!1;return He(r,function(i,f,l,o,c){a===!1&&e===void 0?n=i:n=t(n,i,f,l,o,c),a=!0}),n}function Ve(r,t){if(!r)throw new Error("geojson is required");Sr(r,function(e,n,a){if(e.geometry!==null){var i=e.geometry.type,f=e.geometry.coordinates;switch(i){case"LineString":if(t(e,n,a,0,0)===!1)return!1;break;case"Polygon":for(var l=0;l<f.length;l++)if(t(N.lineString(f[l],e.properties),n,a,l)===!1)return!1;break}}})}function pn(r,t,e){var n=e;return Ve(r,function(a,i,f,l){i===0&&e===void 0?n=a:n=t(n,a,i,f,l)}),n}function gn(r,t){if(t=t||{},!N.isObject(t))throw new Error("options is invalid");var e=t.featureIndex||0,n=t.multiFeatureIndex||0,a=t.geometryIndex||0,i=t.segmentIndex||0,f=t.properties,l;switch(r.type){case"FeatureCollection":e<0&&(e=r.features.length+e),f=f||r.features[e].properties,l=r.features[e].geometry;break;case"Feature":f=f||r.properties,l=r.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":l=r;break;default:throw new Error("geojson is invalid")}if(l===null)return null;var o=l.coordinates;switch(l.type){case"Point":case"MultiPoint":return null;case"LineString":return i<0&&(i=o.length+i-1),N.lineString([o[i],o[i+1]],f,t);case"Polygon":return a<0&&(a=o.length+a),i<0&&(i=o[a].length+i-1),N.lineString([o[a][i],o[a][i+1]],f,t);case"MultiLineString":return n<0&&(n=o.length+n),i<0&&(i=o[n].length+i-1),N.lineString([o[n][i],o[n][i+1]],f,t);case"MultiPolygon":return n<0&&(n=o.length+n),a<0&&(a=o[n].length+a),i<0&&(i=o[n][a].length-i-1),N.lineString([o[n][a][i],o[n][a][i+1]],f,t)}throw new Error("geojson is invalid")}function dn(r,t){if(t=t||{},!N.isObject(t))throw new Error("options is invalid");var e=t.featureIndex||0,n=t.multiFeatureIndex||0,a=t.geometryIndex||0,i=t.coordIndex||0,f=t.properties,l;switch(r.type){case"FeatureCollection":e<0&&(e=r.features.length+e),f=f||r.features[e].properties,l=r.features[e].geometry;break;case"Feature":f=f||r.properties,l=r.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":l=r;break;default:throw new Error("geojson is invalid")}if(l===null)return null;var o=l.coordinates;switch(l.type){case"Point":return N.point(o,f,t);case"MultiPoint":return n<0&&(n=o.length+n),N.point(o[n],f,t);case"LineString":return i<0&&(i=o.length+i),N.point(o[i],f,t);case"Polygon":return a<0&&(a=o.length+a),i<0&&(i=o[a].length+i),N.point(o[a][i],f,t);case"MultiLineString":return n<0&&(n=o.length+n),i<0&&(i=o[n].length+i),N.point(o[n][i],f,t);case"MultiPolygon":return n<0&&(n=o.length+n),a<0&&(a=o[n].length+a),i<0&&(i=o[n][a].length-i),N.point(o[n][a][i],f,t)}throw new Error("geojson is invalid")}L.coordAll=cn;L.coordEach=fr;L.coordReduce=ln;L.featureEach=ze;L.featureReduce=sn;L.findPoint=dn;L.findSegment=gn;L.flattenEach=Sr;L.flattenReduce=hn;L.geomEach=Jr;L.geomReduce=yn;L.lineEach=Ve;L.lineReduce=pn;L.propEach=Je;L.propReduce=un;L.segmentEach=He;L.segmentReduce=vn;const mn=kt(Gt);var W=fn,Ke=Wr,Ie=L,K=mn.default,bn=Ie.featureEach;Ie.coordEach;Ke.polygon;var fe=Ke.featureCollection;function Qe(r){var t=new W(r);return t.insert=function(e){if(e.type!=="Feature")throw new Error("invalid feature");return e.bbox=e.bbox?e.bbox:K(e),W.prototype.insert.call(this,e)},t.load=function(e){var n=[];return Array.isArray(e)?e.forEach(function(a){if(a.type!=="Feature")throw new Error("invalid features");a.bbox=a.bbox?a.bbox:K(a),n.push(a)}):bn(e,function(a){if(a.type!=="Feature")throw new Error("invalid features");a.bbox=a.bbox?a.bbox:K(a),n.push(a)}),W.prototype.load.call(this,n)},t.remove=function(e,n){if(e.type!=="Feature")throw new Error("invalid feature");return e.bbox=e.bbox?e.bbox:K(e),W.prototype.remove.call(this,e,n)},t.clear=function(){return W.prototype.clear.call(this)},t.search=function(e){var n=W.prototype.search.call(this,this.toBBox(e));return fe(n)},t.collides=function(e){return W.prototype.collides.call(this,this.toBBox(e))},t.all=function(){var e=W.prototype.all.call(this);return fe(e)},t.toJSON=function(){return W.prototype.toJSON.call(this)},t.fromJSON=function(e){return W.prototype.fromJSON.call(this,e)},t.toBBox=function(e){var n;if(e.bbox)n=e.bbox;else if(Array.isArray(e)&&e.length===4)n=e;else if(Array.isArray(e)&&e.length===6)n=[e[0],e[1],e[3],e[4]];else if(e.type==="Feature")n=K(e);else if(e.type==="FeatureCollection")n=K(e);else throw new Error("invalid geojson");return{minX:n[0],minY:n[1],maxX:n[2],maxY:n[3]}},t}Ur.exports=Qe;Ur.exports.default=Qe;var wn=Ur.exports;const zr=Nt(wn);function Ze(r,t){var e={},n=[];if(r.type==="LineString"&&(r=_r(r)),t.type==="LineString"&&(t=_r(t)),r.type==="Feature"&&t.type==="Feature"&&r.geometry!==null&&t.geometry!==null&&r.geometry.type==="LineString"&&t.geometry.type==="LineString"&&r.geometry.coordinates.length===2&&t.geometry.coordinates.length===2){var a=le(r,t);return a&&n.push(a),ae(n)}var i=zr();return i.load(Tr(t)),oe(Tr(r),function(f){oe(i.search(f),function(l){var o=le(f,l);if(o){var c=z(o).join(",");e[c]||(e[c]=!0,n.push(o))}})}),ae(n)}function le(r,t){var e=z(r),n=z(t);if(e.length!==2)throw new Error("<intersects> line1 must only contain 2 coordinates");if(n.length!==2)throw new Error("<intersects> line2 must only contain 2 coordinates");var a=e[0][0],i=e[0][1],f=e[1][0],l=e[1][1],o=n[0][0],c=n[0][1],m=n[1][0],h=n[1][1],b=(h-c)*(f-a)-(m-o)*(l-i),w=(m-o)*(i-c)-(h-c)*(a-o),S=(f-a)*(i-c)-(l-i)*(a-o);if(b===0)return null;var A=w/b,C=S/b;if(A>=0&&A<=1&&C>=0&&C<=1){var O=a+A*(f-a),s=i+A*(l-i);return Zt([O,s])}return null}function br(r,t,e){e===void 0&&(e={});var n={type:"Feature"};return(e.id===0||e.id)&&(n.id=e.id),e.bbox&&(n.bbox=e.bbox),n.properties=t||{},n.geometry=r,n}function Or(r,t,e){if(e===void 0&&(e={}),!r)throw new Error("coordinates is required");if(!Array.isArray(r))throw new Error("coordinates must be an Array");if(r.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!se(r[0])||!se(r[1]))throw new Error("coordinates must contain numbers");var n={type:"Point",coordinates:r};return br(n,t,e)}function ue(r,t,e){if(e===void 0&&(e={}),r.length<2)throw new Error("coordinates must be an array of two or more positions");var n={type:"LineString",coordinates:r};return br(n,t,e)}function se(r){return!isNaN(r)&&r!==null&&!Array.isArray(r)}function Pn(r,t){var e,n,a,i,f,l,o,c,m,h,b=0,w=r.type==="FeatureCollection",S=r.type==="Feature",A=w?r.features.length:1;for(e=0;e<A;e++){for(l=w?r.features[e].geometry:S?r.geometry:r,c=w?r.features[e].properties:S?r.properties:{},m=w?r.features[e].bbox:S?r.bbox:void 0,h=w?r.features[e].id:S?r.id:void 0,o=l?l.type==="GeometryCollection":!1,f=o?l.geometries.length:1,a=0;a<f;a++){if(i=o?l.geometries[a]:l,i===null){if(t(null,b,c,m,h)===!1)return!1;continue}switch(i.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(t(i,b,c,m,h)===!1)return!1;break}case"GeometryCollection":{for(n=0;n<i.geometries.length;n++)if(t(i.geometries[n],b,c,m,h)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}b++}}function Mn(r,t){Pn(r,function(e,n,a,i,f){var l=e===null?null:e.type;switch(l){case null:case"Point":case"LineString":case"Polygon":return t(br(e,a,{bbox:i,id:f}),n,0)===!1?!1:void 0}var o;switch(l){case"MultiPoint":o="Point";break;case"MultiLineString":o="LineString";break;case"MultiPolygon":o="Polygon";break}for(var c=0;c<e.coordinates.length;c++){var m=e.coordinates[c],h={type:o,coordinates:m};if(t(br(h,a),n,c)===!1)return!1}})}function Sn(r,t,e){e===void 0&&(e={});var n=Or([1/0,1/0],{dist:1/0}),a=0;return Mn(r,function(i){for(var f=z(i),l=0;l<f.length-1;l++){var o=Or(f[l]);o.properties.dist=J(t,o,e);var c=Or(f[l+1]);c.properties.dist=J(t,c,e);var m=J(o,c,e),h=Math.max(o.properties.dist,c.properties.dist),b=Mr(o,c),w=ar(t,h,b+90,e),S=ar(t,h,b-90,e),A=Ze(ue([w.geometry.coordinates,S.geometry.coordinates]),ue([o.geometry.coordinates,c.geometry.coordinates])),C=null;A.features.length>0&&(C=A.features[0],C.properties.dist=J(t,C,e),C.properties.location=a+J(o,C,e)),o.properties.dist<n.properties.dist&&(n=o,n.properties.index=l,n.properties.location=a),c.properties.dist<n.properties.dist&&(n=c,n.properties.index=l+1,n.properties.location=a+m),C&&C.properties.dist<n.properties.dist&&(n=C,n.properties.index=l),a+=m}}),n}var _=63710088e-1,je={centimeters:_*100,centimetres:_*100,degrees:_/111325,feet:_*3.28084,inches:_*39.37,kilometers:_/1e3,kilometres:_/1e3,meters:_,metres:_,miles:_/1609.344,millimeters:_*1e3,millimetres:_*1e3,nauticalmiles:_/1852,radians:1,yards:_*1.0936};function En(r,t){t===void 0&&(t="kilometers");var e=je[t];if(!e)throw new Error(t+" units is invalid");return r*e}function An(r,t){var e=je[t];return r/e}function $n(r,t,e){if(e===void 0&&(e="kilometers"),!(r>=0))throw new Error("length must be a positive number");return En(An(r,t),e)}function On(r,t,e){e===void 0&&(e={});var n=G(r),a=G(t);a[0]+=a[0]-n[0]>180?-360:n[0]-a[0]>180?360:0;var i=Rn(n,a),f=$n(i,"meters",e.units);return f}function Rn(r,t,e){e=e===void 0?_:Number(e);var n=e,a=r[1]*Math.PI/180,i=t[1]*Math.PI/180,f=i-a,l=Math.abs(t[0]-r[0])*Math.PI/180;l>Math.PI&&(l-=2*Math.PI);var o=Math.log(Math.tan(i/2+Math.PI/4)/Math.tan(a/2+Math.PI/4)),c=Math.abs(o)>1e-11?f/o:Math.cos(a),m=Math.sqrt(f*f+c*c*l*l),h=m*n;return h}function Cn(r,t,e){e===void 0&&(e={});var n={type:"Feature"};return(e.id===0||e.id)&&(n.id=e.id),e.bbox&&(n.bbox=e.bbox),n.properties={},n.geometry=r,n}function ce(r,t,e){if(e===void 0&&(e={}),!r)throw new Error("coordinates is required");if(!Array.isArray(r))throw new Error("coordinates must be an Array");if(r.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!ye(r[0])||!ye(r[1]))throw new Error("coordinates must contain numbers");var n={type:"Point",coordinates:r};return Cn(n,t,e)}function ye(r){return!isNaN(r)&&r!==null&&!Array.isArray(r)}function zi(r,t,e){e===void 0&&(e={});for(var n=Xe(r),a=n.coordinates,i=0,f=0;f<a.length&&!(t>=i&&f===a.length-1);f++)if(i>=t){var l=t-i;if(l){var o=Mr(a[f],a[f-1])-180,c=ar(a[f],l,o,e);return c}else return ce(a[f])}else i+=J(a[f],a[f+1],e);return ce(a[a.length-1])}function rt(r,t,e){if(r!==null)for(var n,a,i,f,l,o,c,m=0,h=0,b,w=r.type,S=w==="FeatureCollection",A=w==="Feature",C=S?r.features.length:1,O=0;O<C;O++){c=S?r.features[O].geometry:A?r.geometry:r,b=c?c.type==="GeometryCollection":!1,l=b?c.geometries.length:1;for(var s=0;s<l;s++){var u=0,y=0;if(f=b?c.geometries[s]:c,f!==null){o=f.coordinates;var v=f.type;switch(m=0,v){case null:break;case"Point":if(t(o,h,O,u,y)===!1)return!1;h++,u++;break;case"LineString":case"MultiPoint":for(n=0;n<o.length;n++){if(t(o[n],h,O,u,y)===!1)return!1;h++,v==="MultiPoint"&&u++}v==="LineString"&&u++;break;case"Polygon":case"MultiLineString":for(n=0;n<o.length;n++){for(a=0;a<o[n].length-m;a++){if(t(o[n][a],h,O,u,y)===!1)return!1;h++}v==="MultiLineString"&&u++,v==="Polygon"&&y++}v==="Polygon"&&u++;break;case"MultiPolygon":for(n=0;n<o.length;n++){for(y=0,a=0;a<o[n].length;a++){for(i=0;i<o[n][a].length-m;i++){if(t(o[n][a][i],h,O,u,y)===!1)return!1;h++}y++}u++}break;case"GeometryCollection":for(n=0;n<f.geometries.length;n++)if(rt(f.geometries[n],t)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function Fn(r,t){t===void 0&&(t={});var e=t.precision,n=t.coordinates,a=t.mutate;if(e=e==null||isNaN(e)?6:e,n=n==null||isNaN(n)?3:n,!r)throw new Error("<geojson> is required");if(typeof e!="number")throw new Error("<precision> must be a number");if(typeof n!="number")throw new Error("<coordinates> must be a number");(a===!1||a===void 0)&&(r=JSON.parse(JSON.stringify(r)));var i=Math.pow(10,e);return rt(r,function(f){Bn(f,i,n)}),r}function Bn(r,t,e){r.length>e&&r.splice(e,r.length);for(var n=0;n<r.length;n++)r[n]=Math.round(r[n]*t)/t;return r}function xr(r,t,e){e===void 0&&(e={});var n={type:"Feature"};return(e.id===0||e.id)&&(n.id=e.id),e.bbox&&(n.bbox=e.bbox),n.properties=t||{},n.geometry=r,n}function he(r,t,e){if(e===void 0&&(e={}),r.length<2)throw new Error("coordinates must be an array of two or more positions");var n={type:"LineString",coordinates:r};return xr(n,t,e)}function tr(r,t){t===void 0&&(t={});var e={type:"FeatureCollection"};return t.id&&(e.id=t.id),t.bbox&&(e.bbox=t.bbox),e.features=r,e}function Hr(r,t){if(r.type==="Feature")t(r,0);else if(r.type==="FeatureCollection")for(var e=0;e<r.features.length&&t(r.features[e],e)!==!1;e++);}function Ln(r,t,e){var n=e;return Hr(r,function(a,i){i===0&&e===void 0?n=a:n=t(n,a,i)}),n}function kn(r,t){var e,n,a,i,f,l,o,c,m,h,b=0,w=r.type==="FeatureCollection",S=r.type==="Feature",A=w?r.features.length:1;for(e=0;e<A;e++){for(l=w?r.features[e].geometry:S?r.geometry:r,c=w?r.features[e].properties:S?r.properties:{},m=w?r.features[e].bbox:S?r.bbox:void 0,h=w?r.features[e].id:S?r.id:void 0,o=l?l.type==="GeometryCollection":!1,f=o?l.geometries.length:1,a=0;a<f;a++){if(i=o?l.geometries[a]:l,i===null){if(t(null,b,c,m,h)===!1)return!1;continue}switch(i.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(t(i,b,c,m,h)===!1)return!1;break}case"GeometryCollection":{for(n=0;n<i.geometries.length;n++)if(t(i.geometries[n],b,c,m,h)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}b++}}function Nn(r,t){kn(r,function(e,n,a,i,f){var l=e===null?null:e.type;switch(l){case null:case"Point":case"LineString":case"Polygon":return t(xr(e,a,{bbox:i,id:f}),n,0)===!1?!1:void 0}var o;switch(l){case"MultiPoint":o="Point";break;case"MultiLineString":o="LineString";break;case"MultiPolygon":o="Polygon";break}for(var c=0;c<e.coordinates.length;c++){var m=e.coordinates[c],h={type:o,coordinates:m};if(t(xr(h,a),n,c)===!1)return!1}})}function Hi(r,t){if(!r)throw new Error("line is required");if(!t)throw new Error("splitter is required");var e=jr(r),n=jr(t);if(e!=="LineString")throw new Error("line must be LineString");if(n==="FeatureCollection")throw new Error("splitter cannot be a FeatureCollection");if(n==="GeometryCollection")throw new Error("splitter cannot be a GeometryCollection");var a=Fn(t,{precision:7});switch(n){case"Point":return Yr(r,a);case"MultiPoint":return ve(r,a);case"LineString":case"MultiLineString":case"Polygon":case"MultiPolygon":return ve(r,Ze(r,a))}}function ve(r,t){var e=[],n=zr();return Nn(t,function(a){if(e.forEach(function(l,o){l.id=o}),!e.length)e=Yr(r,a).features,e.forEach(function(l){l.bbox||(l.bbox=xt(mr(l)))}),n.load(tr(e));else{var i=n.search(a);if(i.features.length){var f=et(a,i);e=e.filter(function(l){return l.id!==f.id}),n.remove(f),Hr(Yr(f,a),function(l){e.push(l),n.insert(l)})}}}),tr(e)}function Yr(r,t){var e=[],n=z(r)[0],a=z(r)[r.geometry.coordinates.length-1];if(Rr(n,G(t))||Rr(a,G(t)))return tr([r]);var i=zr(),f=Tr(r);i.load(f);var l=i.search(t);if(!l.features.length)return tr([r]);var o=et(t,l),c=[n],m=Ln(f,function(h,b,w){var S=z(b)[1],A=G(t);return w===o.id?(h.push(A),e.push(he(h)),Rr(A,S)?[A]:[A,S]):(h.push(S),h)},c);return m.length>1&&e.push(he(m)),tr(e)}function et(r,t){if(!t.features.length)throw new Error("lines must contain features");if(t.features.length===1)return t.features[0];var e,n=1/0;return Hr(t,function(a){var i=Sn(a,r),f=i.properties.dist;f<n&&(e=a,n=f)}),e}function Rr(r,t){return r[0]===t[0]&&r[1]===t[1]}var pe=Object.prototype.toString,tt=function(t){var e=pe.call(t),n=e==="[object Arguments]";return n||(n=e!=="[object Array]"&&t!==null&&typeof t=="object"&&typeof t.length=="number"&&t.length>=0&&pe.call(t.callee)==="[object Function]"),n},Cr,ge;function Gn(){if(ge)return Cr;ge=1;var r;if(!Object.keys){var t=Object.prototype.hasOwnProperty,e=Object.prototype.toString,n=tt,a=Object.prototype.propertyIsEnumerable,i=!a.call({toString:null},"toString"),f=a.call(function(){},"prototype"),l=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],o=function(b){var w=b.constructor;return w&&w.prototype===b},c={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},m=function(){if(typeof window>"u")return!1;for(var b in window)try{if(!c["$"+b]&&t.call(window,b)&&window[b]!==null&&typeof window[b]=="object")try{o(window[b])}catch{return!0}}catch{return!0}return!1}(),h=function(b){if(typeof window>"u"||!m)return o(b);try{return o(b)}catch{return!1}};r=function(w){var S=w!==null&&typeof w=="object",A=e.call(w)==="[object Function]",C=n(w),O=S&&e.call(w)==="[object String]",s=[];if(!S&&!A&&!C)throw new TypeError("Object.keys called on a non-object");var u=f&&A;if(O&&w.length>0&&!t.call(w,0))for(var y=0;y<w.length;++y)s.push(String(y));if(C&&w.length>0)for(var v=0;v<w.length;++v)s.push(String(v));else for(var M in w)!(u&&M==="prototype")&&t.call(w,M)&&s.push(String(M));if(i)for(var P=h(w),E=0;E<l.length;++E)!(P&&l[E]==="constructor")&&t.call(w,l[E])&&s.push(l[E]);return s}}return Cr=r,Cr}var _n=Array.prototype.slice,Dn=tt,de=Object.keys,pr=de?function(t){return de(t)}:Gn(),me=Object.keys;pr.shim=function(){if(Object.keys){var t=function(){var e=Object.keys(arguments);return e&&e.length===arguments.length}(1,2);t||(Object.keys=function(n){return Dn(n)?me(_n.call(n)):me(n)})}else Object.keys=pr;return Object.keys||pr};var Tn=pr,nt=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var t={},e=Symbol("test"),n=Object(e);if(typeof e=="string"||Object.prototype.toString.call(e)!=="[object Symbol]"||Object.prototype.toString.call(n)!=="[object Symbol]")return!1;var a=42;t[e]=a;for(var i in t)return!1;if(typeof Object.keys=="function"&&Object.keys(t).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(t).length!==0)return!1;var f=Object.getOwnPropertySymbols(t);if(f.length!==1||f[0]!==e||!Object.prototype.propertyIsEnumerable.call(t,e))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var l=Object.getOwnPropertyDescriptor(t,e);if(l.value!==a||l.enumerable!==!0)return!1}return!0},xn=nt,at=function(){return xn()&&!!Symbol.toStringTag},it=Object,Yn=Error,qn=EvalError,Xn=RangeError,Un=ReferenceError,ot=SyntaxError,Er=TypeError,Wn=URIError,Jn=Math.abs,zn=Math.floor,Hn=Math.max,Vn=Math.min,Kn=Math.pow,In=Math.round,Qn=Number.isNaN||function(t){return t!==t},Zn=Qn,jn=function(t){return Zn(t)||t===0?t:t<0?-1:1},ra=Object.getOwnPropertyDescriptor,gr=ra;if(gr)try{gr([],"length")}catch{gr=null}var lr=gr,dr=Object.defineProperty||!1;if(dr)try{dr({},"a",{value:1})}catch{dr=!1}var Ar=dr,Fr,be;function ea(){if(be)return Fr;be=1;var r=typeof Symbol<"u"&&Symbol,t=nt;return Fr=function(){return typeof r!="function"||typeof Symbol!="function"||typeof r("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:t()},Fr}var ft=typeof Reflect<"u"&&Reflect.getPrototypeOf||null,ta=it,lt=ta.getPrototypeOf||null,na="Function.prototype.bind called on incompatible ",aa=Object.prototype.toString,ia=Math.max,oa="[object Function]",we=function(t,e){for(var n=[],a=0;a<t.length;a+=1)n[a]=t[a];for(var i=0;i<e.length;i+=1)n[i+t.length]=e[i];return n},fa=function(t,e){for(var n=[],a=e,i=0;a<t.length;a+=1,i+=1)n[i]=t[a];return n},la=function(r,t){for(var e="",n=0;n<r.length;n+=1)e+=r[n],n+1<r.length&&(e+=t);return e},ua=function(t){var e=this;if(typeof e!="function"||aa.apply(e)!==oa)throw new TypeError(na+e);for(var n=fa(arguments,1),a,i=function(){if(this instanceof a){var m=e.apply(this,we(n,arguments));return Object(m)===m?m:this}return e.apply(t,we(n,arguments))},f=ia(0,e.length-n.length),l=[],o=0;o<f;o++)l[o]="$"+o;if(a=Function("binder","return function ("+la(l,",")+"){ return binder.apply(this,arguments); }")(i),e.prototype){var c=function(){};c.prototype=e.prototype,a.prototype=new c,c.prototype=null}return a},sa=ua,ur=Function.prototype.bind||sa,Vr=Function.prototype.call,Kr=Function.prototype.apply,ca=typeof Reflect<"u"&&Reflect&&Reflect.apply,ya=ur,ha=Kr,va=Vr,pa=ca,ut=pa||ya.call(va,ha),ga=ur,da=Er,ma=Vr,ba=ut,Ir=function(t){if(t.length<1||typeof t[0]!="function")throw new da("a function is required");return ba(ga,ma,t)},wa=Ir,Pe=lr,st;try{st=[].__proto__===Array.prototype}catch(r){if(!r||typeof r!="object"||!("code"in r)||r.code!=="ERR_PROTO_ACCESS")throw r}var Br=!!st&&Pe&&Pe(Object.prototype,"__proto__"),ct=Object,Me=ct.getPrototypeOf,Pa=Br&&typeof Br.get=="function"?wa([Br.get]):typeof Me=="function"?function(t){return Me(t==null?t:ct(t))}:!1,Se=ft,Ee=lt,Ae=Pa,Ma=Se?function(t){return Se(t)}:Ee?function(t){if(!t||typeof t!="object"&&typeof t!="function")throw new TypeError("getProto: not an object");return Ee(t)}:Ae?function(t){return Ae(t)}:null,Sa=Function.prototype.call,Ea=Object.prototype.hasOwnProperty,Aa=ur,yt=Aa.call(Sa,Ea),F,$a=it,Oa=Yn,Ra=qn,Ca=Xn,Fa=Un,rr=ot,j=Er,Ba=Wn,La=Jn,ka=zn,Na=Hn,Ga=Vn,_a=Kn,Da=In,Ta=jn,ht=Function,Lr=function(r){try{return ht('"use strict"; return ('+r+").constructor;")()}catch{}},ir=lr,xa=Ar,kr=function(){throw new j},Ya=ir?function(){try{return arguments.callee,kr}catch{try{return ir(arguments,"callee").get}catch{return kr}}}():kr,I=ea()(),k=Ma,qa=lt,Xa=ft,vt=Kr,sr=Vr,Z={},Ua=typeof Uint8Array>"u"||!k?F:k(Uint8Array),V={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?F:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?F:ArrayBuffer,"%ArrayIteratorPrototype%":I&&k?k([][Symbol.iterator]()):F,"%AsyncFromSyncIteratorPrototype%":F,"%AsyncFunction%":Z,"%AsyncGenerator%":Z,"%AsyncGeneratorFunction%":Z,"%AsyncIteratorPrototype%":Z,"%Atomics%":typeof Atomics>"u"?F:Atomics,"%BigInt%":typeof BigInt>"u"?F:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?F:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?F:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?F:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Oa,"%eval%":eval,"%EvalError%":Ra,"%Float16Array%":typeof Float16Array>"u"?F:Float16Array,"%Float32Array%":typeof Float32Array>"u"?F:Float32Array,"%Float64Array%":typeof Float64Array>"u"?F:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?F:FinalizationRegistry,"%Function%":ht,"%GeneratorFunction%":Z,"%Int8Array%":typeof Int8Array>"u"?F:Int8Array,"%Int16Array%":typeof Int16Array>"u"?F:Int16Array,"%Int32Array%":typeof Int32Array>"u"?F:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":I&&k?k(k([][Symbol.iterator]())):F,"%JSON%":typeof JSON=="object"?JSON:F,"%Map%":typeof Map>"u"?F:Map,"%MapIteratorPrototype%":typeof Map>"u"||!I||!k?F:k(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":$a,"%Object.getOwnPropertyDescriptor%":ir,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?F:Promise,"%Proxy%":typeof Proxy>"u"?F:Proxy,"%RangeError%":Ca,"%ReferenceError%":Fa,"%Reflect%":typeof Reflect>"u"?F:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?F:Set,"%SetIteratorPrototype%":typeof Set>"u"||!I||!k?F:k(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?F:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":I&&k?k(""[Symbol.iterator]()):F,"%Symbol%":I?Symbol:F,"%SyntaxError%":rr,"%ThrowTypeError%":Ya,"%TypedArray%":Ua,"%TypeError%":j,"%Uint8Array%":typeof Uint8Array>"u"?F:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?F:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?F:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?F:Uint32Array,"%URIError%":Ba,"%WeakMap%":typeof WeakMap>"u"?F:WeakMap,"%WeakRef%":typeof WeakRef>"u"?F:WeakRef,"%WeakSet%":typeof WeakSet>"u"?F:WeakSet,"%Function.prototype.call%":sr,"%Function.prototype.apply%":vt,"%Object.defineProperty%":xa,"%Object.getPrototypeOf%":qa,"%Math.abs%":La,"%Math.floor%":ka,"%Math.max%":Na,"%Math.min%":Ga,"%Math.pow%":_a,"%Math.round%":Da,"%Math.sign%":Ta,"%Reflect.getPrototypeOf%":Xa};if(k)try{null.error}catch(r){var Wa=k(k(r));V["%Error.prototype%"]=Wa}var Ja=function r(t){var e;if(t==="%AsyncFunction%")e=Lr("async function () {}");else if(t==="%GeneratorFunction%")e=Lr("function* () {}");else if(t==="%AsyncGeneratorFunction%")e=Lr("async function* () {}");else if(t==="%AsyncGenerator%"){var n=r("%AsyncGeneratorFunction%");n&&(e=n.prototype)}else if(t==="%AsyncIteratorPrototype%"){var a=r("%AsyncGenerator%");a&&k&&(e=k(a.prototype))}return V[t]=e,e},$e={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},cr=ur,wr=yt,za=cr.call(sr,Array.prototype.concat),Ha=cr.call(vt,Array.prototype.splice),Oe=cr.call(sr,String.prototype.replace),Pr=cr.call(sr,String.prototype.slice),Va=cr.call(sr,RegExp.prototype.exec),Ka=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,Ia=/\\(\\)?/g,Qa=function(t){var e=Pr(t,0,1),n=Pr(t,-1);if(e==="%"&&n!=="%")throw new rr("invalid intrinsic syntax, expected closing `%`");if(n==="%"&&e!=="%")throw new rr("invalid intrinsic syntax, expected opening `%`");var a=[];return Oe(t,Ka,function(i,f,l,o){a[a.length]=l?Oe(o,Ia,"$1"):f||i}),a},Za=function(t,e){var n=t,a;if(wr($e,n)&&(a=$e[n],n="%"+a[0]+"%"),wr(V,n)){var i=V[n];if(i===Z&&(i=Ja(n)),typeof i>"u"&&!e)throw new j("intrinsic "+t+" exists, but is not available. Please file an issue!");return{alias:a,name:n,value:i}}throw new rr("intrinsic "+t+" does not exist!")},pt=function(t,e){if(typeof t!="string"||t.length===0)throw new j("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof e!="boolean")throw new j('"allowMissing" argument must be a boolean');if(Va(/^%?[^%]*%?$/,t)===null)throw new rr("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var n=Qa(t),a=n.length>0?n[0]:"",i=Za("%"+a+"%",e),f=i.name,l=i.value,o=!1,c=i.alias;c&&(a=c[0],Ha(n,za([0,1],c)));for(var m=1,h=!0;m<n.length;m+=1){var b=n[m],w=Pr(b,0,1),S=Pr(b,-1);if((w==='"'||w==="'"||w==="`"||S==='"'||S==="'"||S==="`")&&w!==S)throw new rr("property names with quotes must have matching quotes");if((b==="constructor"||!h)&&(o=!0),a+="."+b,f="%"+a+"%",wr(V,f))l=V[f];else if(l!=null){if(!(b in l)){if(!e)throw new j("base intrinsic for "+t+" exists, but the property is not available.");return}if(ir&&m+1>=n.length){var A=ir(l,b);h=!!A,h&&"get"in A&&!("originalValue"in A.get)?l=A.get:l=l[b]}else h=wr(l,b),l=l[b];h&&!o&&(V[f]=l)}}return l},gt=pt,dt=Ir,ja=dt([gt("%String.prototype.indexOf%")]),mt=function(t,e){var n=gt(t,!!e);return typeof n=="function"&&ja(t,".prototype.")>-1?dt([n]):n},Re=Ar,ri=ot,Q=Er,Ce=lr,bt=function(t,e,n){if(!t||typeof t!="object"&&typeof t!="function")throw new Q("`obj` must be an object or a function`");if(typeof e!="string"&&typeof e!="symbol")throw new Q("`property` must be a string or a symbol`");if(arguments.length>3&&typeof arguments[3]!="boolean"&&arguments[3]!==null)throw new Q("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&typeof arguments[4]!="boolean"&&arguments[4]!==null)throw new Q("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&typeof arguments[5]!="boolean"&&arguments[5]!==null)throw new Q("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&typeof arguments[6]!="boolean")throw new Q("`loose`, if provided, must be a boolean");var a=arguments.length>3?arguments[3]:null,i=arguments.length>4?arguments[4]:null,f=arguments.length>5?arguments[5]:null,l=arguments.length>6?arguments[6]:!1,o=!!Ce&&Ce(t,e);if(Re)Re(t,e,{configurable:f===null&&o?o.configurable:!f,enumerable:a===null&&o?o.enumerable:!a,value:n,writable:i===null&&o?o.writable:!i});else if(l||!a&&!i&&!f)t[e]=n;else throw new ri("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.")},qr=Ar,wt=function(){return!!qr};wt.hasArrayLengthDefineBug=function(){if(!qr)return null;try{return qr([],"length",{value:1}).length!==1}catch{return!0}};var Pt=wt,ei=Tn,ti=typeof Symbol=="function"&&typeof Symbol("foo")=="symbol",ni=Object.prototype.toString,ai=Array.prototype.concat,Fe=bt,ii=function(r){return typeof r=="function"&&ni.call(r)==="[object Function]"},Mt=Pt(),oi=function(r,t,e,n){if(t in r){if(n===!0){if(r[t]===e)return}else if(!ii(n)||!n())return}Mt?Fe(r,t,e,!0):Fe(r,t,e)},St=function(r,t){var e=arguments.length>2?arguments[2]:{},n=ei(t);ti&&(n=ai.call(n,Object.getOwnPropertySymbols(t)));for(var a=0;a<n.length;a+=1)oi(r,n[a],t[n[a]],e[n[a]])};St.supportsDescriptors=!!Mt;var Vi=St,Et={exports:{}},fi=pt,Be=bt,li=Pt(),Le=lr,ke=Er,ui=fi("%Math.floor%"),si=function(t,e){if(typeof t!="function")throw new ke("`fn` is not a function");if(typeof e!="number"||e<0||e>4294967295||ui(e)!==e)throw new ke("`length` must be a positive 32-bit integer");var n=arguments.length>2&&!!arguments[2],a=!0,i=!0;if("length"in t&&Le){var f=Le(t,"length");f&&!f.configurable&&(a=!1),f&&!f.writable&&(i=!1)}return(a||i||!n)&&(li?Be(t,"length",e,!0,!0):Be(t,"length",e)),t},ci=ur,yi=Kr,hi=ut,vi=function(){return hi(ci,yi,arguments)};(function(r){var t=si,e=Ar,n=Ir,a=vi;r.exports=function(f){var l=n(arguments),o=f.length-(arguments.length-1);return t(l,1+(o>0?o:0),!0)},e?e(r.exports,"apply",{value:a}):r.exports.apply=a})(Et);var Ki=Et.exports,Ne=mt,pi=at(),gi=yt,di=lr,Xr;if(pi){var mi=Ne("RegExp.prototype.exec"),Ge={},Nr=function(){throw Ge},_e={toString:Nr,valueOf:Nr};typeof Symbol.toPrimitive=="symbol"&&(_e[Symbol.toPrimitive]=Nr),Xr=function(t){if(!t||typeof t!="object")return!1;var e=di(t,"lastIndex"),n=e&&gi(e,"value");if(!n)return!1;try{mi(t,_e)}catch(a){return a===Ge}}}else{var bi=Ne("Object.prototype.toString"),wi="[object RegExp]";Xr=function(t){return!t||typeof t!="object"&&typeof t!="function"?!1:bi(t)===wi}}var Ii=Xr,or=function(){return typeof(function(){}).name=="string"},nr=Object.getOwnPropertyDescriptor;if(nr)try{nr([],"length")}catch{nr=null}or.functionsHaveConfigurableNames=function(){if(!or()||!nr)return!1;var t=nr(function(){},"name");return!!t&&!!t.configurable};var Pi=Function.prototype.bind;or.boundFunctionsHaveNames=function(){return or()&&typeof Pi=="function"&&(function(){}).bind().name!==""};var Qi=or,At=mt,Mi=At("Date.prototype.getDay"),Si=function(t){try{return Mi(t),!0}catch{return!1}},Ei=At("Object.prototype.toString"),Ai="[object Date]",$i=at(),Zi=function(t){return typeof t!="object"||t===null?!1:$i?Si(t):Ei(t)===Ai};function Oi(r){var t=r%(2*Math.PI);return t*180/Math.PI}function Gr(r){var t=r%360;return t*Math.PI/180}function Ri(r,t,e){e===void 0&&(e={});var n;e.final?n=De(G(t),G(r)):n=De(G(r),G(t));var a=n>180?-(360-n):n;return a}function De(r,t){var e=Gr(r[1]),n=Gr(t[1]),a=Gr(t[0]-r[0]);a>Math.PI&&(a-=2*Math.PI),a<-Math.PI&&(a+=2*Math.PI);var i=Math.log(Math.tan(n/2+Math.PI/4)/Math.tan(e/2+Math.PI/4)),f=Math.atan2(a,i);return(Oi(f)+360)%360}var D=63710088e-1,$t={centimeters:D*100,centimetres:D*100,degrees:D/111325,feet:D*3.28084,inches:D*39.37,kilometers:D/1e3,kilometres:D/1e3,meters:D,metres:D,miles:D/1609.344,millimeters:D*1e3,millimetres:D*1e3,nauticalmiles:D/1852,radians:1,yards:D*1.0936};function Ci(r,t,e){e===void 0&&(e={});var n={type:"Feature"};return(e.id===0||e.id)&&(n.id=e.id),e.bbox&&(n.bbox=e.bbox),n.properties=t||{},n.geometry=r,n}function Fi(r,t,e){if(e===void 0&&(e={}),!r)throw new Error("coordinates is required");if(!Array.isArray(r))throw new Error("coordinates must be an Array");if(r.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!xe(r[0])||!xe(r[1]))throw new Error("coordinates must contain numbers");var n={type:"Point",coordinates:r};return Ci(n,t,e)}function Bi(r,t){var e=$t[t];return r*e}function Li(r,t){t===void 0&&(t="kilometers");var e=$t[t];if(!e)throw new Error(t+" units is invalid");return r/e}function Te(r){var t=r%360;return t*Math.PI/180}function ki(r,t,e){if(t===void 0&&(t="kilometers"),!(r>=0))throw new Error("length must be a positive number");return Bi(Li(r,t),e)}function xe(r){return!isNaN(r)&&r!==null&&!Array.isArray(r)}function Ni(r,t,e,n){n===void 0&&(n={});var a=t<0,i=ki(Math.abs(t),n.units,"meters");a&&(i=-Math.abs(i));var f=G(r),l=Gi(f,i,e);return l[0]+=l[0]-f[0]>180?-360:f[0]-l[0]>180?360:0,Fi(l,n.properties)}function Gi(r,t,e,n){n=n===void 0?D:Number(n);var a=t/n,i=r[0]*Math.PI/180,f=Te(r[1]),l=Te(e),o=a*Math.cos(l),c=f+o;Math.abs(c)>Math.PI/2&&(c=c>0?Math.PI-c:-Math.PI-c);var m=Math.log(Math.tan(c/2+Math.PI/4)/Math.tan(f/2+Math.PI/4)),h=Math.abs(m)>1e-11?o/m:Math.cos(f),b=a*Math.sin(l)/h,w=i+b;return[(w*180/Math.PI+540)%360-180,c*180/Math.PI]}function _i(r){if(!r)throw new Error("geojson is required");switch(r.type){case"Feature":return Ot(r);case"FeatureCollection":return Di(r);case"Point":case"LineString":case"Polygon":case"MultiPoint":case"MultiLineString":case"MultiPolygon":case"GeometryCollection":return Qr(r);default:throw new Error("unknown GeoJSON type")}}function Ot(r){var t={type:"Feature"};return Object.keys(r).forEach(function(e){switch(e){case"type":case"properties":case"geometry":return;default:t[e]=r[e]}}),t.properties=Rt(r.properties),t.geometry=Qr(r.geometry),t}function Rt(r){var t={};return r&&Object.keys(r).forEach(function(e){var n=r[e];typeof n=="object"?n===null?t[e]=null:Array.isArray(n)?t[e]=n.map(function(a){return a}):t[e]=Rt(n):t[e]=n}),t}function Di(r){var t={type:"FeatureCollection"};return Object.keys(r).forEach(function(e){switch(e){case"type":case"features":return;default:t[e]=r[e]}}),t.features=r.features.map(function(e){return Ot(e)}),t}function Qr(r){var t={type:r.type};return r.bbox&&(t.bbox=r.bbox),r.type==="GeometryCollection"?(t.geometries=r.geometries.map(function(e){return Qr(e)}),t):(t.coordinates=Ct(r.coordinates),t)}function Ct(r){var t=r;return typeof t[0]!="object"?t.slice():t.map(function(e){return Ct(e)})}function Ti(r){return!!r&&r.constructor===Object}function Ft(r,t,e){if(r!==null)for(var n,a,i,f,l,o,c,m=0,h=0,b,w=r.type,S=w==="FeatureCollection",A=w==="Feature",C=S?r.features.length:1,O=0;O<C;O++){c=S?r.features[O].geometry:A?r.geometry:r,b=c?c.type==="GeometryCollection":!1,l=b?c.geometries.length:1;for(var s=0;s<l;s++){var u=0,y=0;if(f=b?c.geometries[s]:c,f!==null){o=f.coordinates;var v=f.type;switch(m=0,v){case null:break;case"Point":if(t(o,h,O,u,y)===!1)return!1;h++,u++;break;case"LineString":case"MultiPoint":for(n=0;n<o.length;n++){if(t(o[n],h,O,u,y)===!1)return!1;h++,v==="MultiPoint"&&u++}v==="LineString"&&u++;break;case"Polygon":case"MultiLineString":for(n=0;n<o.length;n++){for(a=0;a<o[n].length-m;a++){if(t(o[n][a],h,O,u,y)===!1)return!1;h++}v==="MultiLineString"&&u++,v==="Polygon"&&y++}v==="Polygon"&&u++;break;case"MultiPolygon":for(n=0;n<o.length;n++){for(y=0,a=0;a<o[n].length;a++){for(i=0;i<o[n][a].length-m;i++){if(t(o[n][a][i],h,O,u,y)===!1)return!1;h++}y++}u++}break;case"GeometryCollection":for(n=0;n<f.geometries.length;n++)if(Ft(f.geometries[n],t)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function ji(r,t,e){if(e=e||{},!Ti(e))throw new Error("options is invalid");var n=e.pivot,a=e.mutate;if(!r)throw new Error("geojson is required");if(t==null||isNaN(t))throw new Error("angle is required");return t===0||(n||(n=Qt(r)),(a===!1||a===void 0)&&(r=_i(r)),Ft(r,function(i){var f=Ri(n,i),l=f+t,o=On(n,i),c=z(Ni(n,o,l));i[0]=c[0],i[1]=c[1]})),r}function Zr(r,t,e){e===void 0&&(e={});var n={type:"Feature"};return(e.id===0||e.id)&&(n.id=e.id),e.bbox&&(n.bbox=e.bbox),n.properties=t||{},n.geometry=r,n}function xi(r,t,e){if(e===void 0&&(e={}),!r)throw new Error("coordinates is required");if(!Array.isArray(r))throw new Error("coordinates must be an Array");if(r.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!Ye(r[0])||!Ye(r[1]))throw new Error("coordinates must contain numbers");var n={type:"Point",coordinates:r};return Zr(n,t,e)}function ro(r,t,e){return e===void 0&&(e={}),Yi(r.map(function(n){return xi(n,t)}),e)}function eo(r,t,e){e===void 0&&(e={});for(var n=0,a=r;n<a.length;n++){var i=a[n];if(i.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var f=0;f<i[i.length-1].length;f++)if(i[i.length-1][f]!==i[0][f])throw new Error("First and last Position are not equivalent.")}var l={type:"Polygon",coordinates:r};return Zr(l,t,e)}function to(r,t,e){if(e===void 0&&(e={}),r.length<2)throw new Error("coordinates must be an array of two or more positions");var n={type:"LineString",coordinates:r};return Zr(n,t,e)}function Yi(r,t){t===void 0&&(t={});var e={type:"FeatureCollection"};return t.id&&(e.id=t.id),t.bbox&&(e.bbox=t.bbox),e.features=r,e}function Ye(r){return!isNaN(r)&&r!==null&&!Array.isArray(r)}export{ot as A,nt as B,Ii as C,ea as D,Zi as E,bt as F,Pt as G,Vi as H,Vn as I,Hn as J,Ar as K,Qi as L,it as M,Wi as N,Ui as O,zt as P,Qn as _,eo as a,J as b,Mr as c,ar as d,Qt as e,mr as f,Hi as g,Xi as h,zi as i,ro as j,mt as k,to as l,Ji as m,lr as n,Ma as o,xi as p,Ki as q,Er as r,at as s,ji as t,zn as u,Jn as v,pt as w,yt as x,Kn as y,Xn as z};
